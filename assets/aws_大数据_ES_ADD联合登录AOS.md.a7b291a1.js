import{_ as e,c as a,o as i,a as t}from"./app.58320140.js";const s="/vue_blog/assets/image-20230809182953243.bf86a7d7.png",r="/vue_blog/assets/image-20230809183023260.abe20611.png",p="/vue_blog/assets/image-20230809183035615.9b7f8b58.png",n="/vue_blog/assets/image-20230809183048052.c6d96139.png",o="/vue_blog/assets/image-20230809183057081.ce32670f.png",l="/vue_blog/assets/image-20230809183105458.bf871161.png",b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"AAD 使用SAML登录OpenSearch","slug":"aad-使用saml登录opensearch","link":"#aad-使用saml登录opensearch","children":[]}],"relativePath":"aws/大数据/ES/ADD联合登录AOS.md"}'),c={name:"aws/大数据/ES/ADD联合登录AOS.md"},_=t('<h2 id="aad-使用saml登录opensearch" tabindex="-1">AAD 使用SAML登录OpenSearch <a class="header-anchor" href="#aad-使用saml登录opensearch" aria-hidden="true">#</a></h2><p>Azure AD的配置如下：</p><ol><li><p>登录 Global Azure 控制台，选择并切换至 Azure Active Directory 服务，在左侧的侧边栏选择 Enterprise applications，All Applications 页面点击 New application.</p></li><li><p>选择 Create your own application，命名，点击 Create 完成创建。</p></li></ol><p><img src="'+s+'" alt="image-20230809182953243"></p><ol start="3"><li><p>点击左侧侧边栏的 Single Sign-on, 选择 SAML。</p></li><li><p>编辑 Basic SAML Configuration,将 Identifier (Entity ID) 和 Reply URL (Assertion Consumer Service URL)地址分别配置为下图的Service provider entity ID和SP-initiated SSO URL中，其他设置保持默认即可.</p></li></ol><p><img src="'+r+'" alt="image-20230809183023260"></p><p><img src="'+p+'" alt="image-20230809183035615"></p><p>这里可能要更改一些信息，比如Attributes &amp; Claims中的name，因为邮箱登录默认的名字是带有特殊字符的，所以我这里使用user.surname，也可以使用固定的字符串进行设定。 配置完毕后，需要导出AAD的XML文件，然后上传到OpenSearch中，这个XML中会包含IDP的一系列信息。</p><p><img src="'+n+'" alt="image-20230809183048052"></p><ol start="5"><li><p>在 SAML Singing Certificate 页面请确保有 Active 的证书，如果没有请点击 Edit 申请证书并激活。确保激活后下载 Federation Metadata XML，IdP entity ID会自动填充，此文件将用户在亚马逊云科技中国区域OpenSearch创建身份提供商 IDP.</p></li><li><p>切换至 Azure 管理控制台并进去 Azure Active Directory 页面，点击左侧侧边栏的 User 页面，点击创建用户, 输入用户名和邮箱地址等并完成用户创建。</p></li><li><p>返回至 Azure Active Directory 主页面，左侧侧边栏选择 Enterprise Applications 并切换到创建的应用下, 点击侧边栏的 Users and groups 或者点击中间页面的 Assign users and groups 图标。</p></li><li><p>添加用户，选择 Azure Active Directory 中的之前创建的用户并关联至亚马逊云科技中国区域的OpenSearch中。我们这里将当前用户关联至我们之前创建的Attributes &amp; Claims中的name，同时在SAML master username 填写这个名字，在我的环境中是Han。</p></li><li><p>再次切换至应用程序页面，点击 Test Single sign-on with AWS China 选项中的 Test 按钮，使用当前用户登录即可完成 SSO 登录。</p></li></ol><p><img src="'+o+'" alt="image-20230809183057081"></p><p><img src="'+l+'" alt="image-20230809183105458"></p>',12),m=[_];function g(A,d,S,u,h,D){return i(),a("div",null,m)}const f=e(c,[["render",g]]);export{b as __pageData,f as default};
